Building DAG of jobs...
Using shell: /usr/bin/bash
Provided remote nodes: 1
Provided resources: mem_mb=64000, mem_mib=61036, disk_mb=6552, disk_mib=6249, cpus_per_task=12, nodes=1
Select jobs to execute...
Execute 1 jobs...

[Mon Nov  4 12:53:05 2024]
rule DNAme_overlaps:
    input: /data1/greenbab/projects/triplicates_epigenetics_diyva/DNA/preprocessed/results/modkit/D-C-2_4000/D-C-2_4000_modpileup_combined.bed
    output: results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed.gz, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed.gz.tbi, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed.gz, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed.gz.tbi, results/DNAme_overlaps/D-C-2_4000/overlaps/D-C-2_4000_5mCpG_5hmCpG_DNAme_mmflil1_8438_Overlaps_minCov5_CpGIslands.bed, results/DNAme_overlaps/D-C-2_4000/overlaps/D-C-2_4000_5mCpG_5hmCpG_DNAme_mmflil1_8438_Overlaps_minCov5.bed
    log: logs/DNAme_overlaps/D-C-2_4000/D-C-2_4000_minCov5.log
    jobid: 0
    reason: Forced execution
    wildcards: samples=D-C-2_4000, minCov=5
    resources: mem_mb=64000, mem_mib=61036, disk_mb=6552, disk_mib=6249, tmpdir=<TBD>, slurm_partition=componc_cpu, slurm_account=greenbab, runtime=1440, cpus_per_task=12, nodes=1

Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 12
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=64000, mem_mib=61036, disk_mb=6552, disk_mib=6249, cpus_per_task=12, nodes=1
Select jobs to execute...
Execute 1 jobs...

[Mon Nov  4 12:53:06 2024]
localrule DNAme_overlaps:
    input: /data1/greenbab/projects/triplicates_epigenetics_diyva/DNA/preprocessed/results/modkit/D-C-2_4000/D-C-2_4000_modpileup_combined.bed
    output: results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed.gz, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed.gz.tbi, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed.gz, results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed.gz.tbi, results/DNAme_overlaps/D-C-2_4000/overlaps/D-C-2_4000_5mCpG_5hmCpG_DNAme_mmflil1_8438_Overlaps_minCov5_CpGIslands.bed, results/DNAme_overlaps/D-C-2_4000/overlaps/D-C-2_4000_5mCpG_5hmCpG_DNAme_mmflil1_8438_Overlaps_minCov5.bed
    log: logs/DNAme_overlaps/D-C-2_4000/D-C-2_4000_minCov5.log
    jobid: 0
    reason: Forced execution
    wildcards: samples=D-C-2_4000, minCov=5
    resources: mem_mb=64000, mem_mib=61036, disk_mb=6552, disk_mib=6249, tmpdir=/tmp, slurm_partition=componc_cpu, slurm_account=greenbab, runtime=1440, cpus_per_task=12, nodes=1


                awk -v min_cov="5 10 15 20" '$10 > min_cov{print $0}' "/data1/greenbab/projects/triplicates_epigenetics_diyva/DNA/preprocessed/results/modkit/D-C-2_4000/D-C-2_4000_modpileup_combined.bed" | sort -k1,1 -k2,2n > results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed
                bgzip -k results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed && tabix -p bed results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed.gz
                
                bedtools intersect -a results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed -b /data1/greenbab/database/mm10/mm10_CpGIslands.bed > results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed
                bgzip -k results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed && tabix -p bed results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed.gz

                bedtools map -a /data1/greenbab/users/ahunos/apps/workflows/methylation_workflows/DNAme_Ref_LINE1/database/L1BaseMmusculus/mmflil1_8438_noHeader.sorted.bed -b results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5_CpGIslands.bed -c 11,11,11,11,11 -o min,max,mean,median,count -g /data1/greenbab/database/mm10/mm10.sorted.chrom.sizes > results/DNAme_overlaps/D-C-2_4000/overlaps/D-C-2_4000_5mCpG_5hmCpG_DNAme_mmflil1_8438_Overlaps_minCov5_CpGIslands.bed 2> logs/DNAme_overlaps/D-C-2_4000/D-C-2_4000_minCov5.log
                bedtools map -a /data1/greenbab/users/ahunos/apps/workflows/methylation_workflows/DNAme_Ref_LINE1/database/L1BaseMmusculus/mmflil1_8438_noHeader.sorted.bed -b results/DNAme_overlaps/D-C-2_4000/D-C-2_4000_5mCpG_5hmCpG_sortedBed_minCov5.bed -c 11,11,11,11,11 -o min,max,mean,median,count -g /data1/greenbab/database/mm10/mm10.sorted.chrom.sizes > results/DNAme_overlaps/D-C-2_4000/overlaps/D-C-2_4000_5mCpG_5hmCpG_DNAme_mmflil1_8438_Overlaps_minCov5.bed 2> logs/DNAme_overlaps/D-C-2_4000/D-C-2_4000_minCov5.log
            
[Mon Nov  4 12:55:54 2024]
Finished job 0.
1 of 1 steps (100%) done
Storing output in storage.
[Mon Nov  4 12:55:54 2024]
Finished job 0.
1 of 1 steps (100%) done
Storing output in storage.
